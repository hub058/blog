(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{172:function(s,a,e){"use strict";e.r(a);var n=e(0),t=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("MySQL")]),s._v(" "),e("p",[s._v("Linux中MySQL数据路的安装配置，远程连接，脚本导入，项目中连接远程MySQL数据库。")])]),s._v(" "),e("h1",{attrs:{id:"_1、mysql安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、mysql安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、MYSQL安装")]),s._v(" "),e("blockquote",[e("p",[s._v("需要使用的素材： MySQL服务器端和客户端的rpm安装包")]),s._v(" "),e("p",[s._v("MySQL-server-5.5.40-1.linux2.6.x86_64.rpm")]),s._v(" "),e("p",[s._v("MySQL-client-5.5.40-1.linux2.6.x86_64.rpm")])]),s._v(" "),e("h2",{attrs:{id:"_1、安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、安装")]),s._v(" "),e("h3",{attrs:{id:"_1、安装服务器端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装服务器端","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、安装服务器端")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# rpm -ivh MySQL-server-5.5.40-1.linux2.6.x86_64.rpm \n# 如果有提示\n# file ...  conflicts with file from package mysql-libs-5.1.71-1.el6.x86_64\n# 安装包  mysql-libs-5.1.71-1.el6.x86_64 有冲突\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("解决办法：把之前有冲突的包卸载掉")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# rpm -e mysql-libs-5.1.71-1.el6.x86_64\nerror: Failed dependencies:\n        libmysqlclient.so.16()(64bit) is needed by (installed) postfix-2:2.6.6-2.2.el6_1.x86_64\n        libmysqlclient.so.16(libmysqlclient_16)(64bit) is needed by (installed) postfix-2:2.6.6-2.2.el6_1.x86_64\n        mysql-libs is needed by (installed) postfix-2:2.6.6-2.2.el6_1.x86_64\n# 卸载的软件包，有依赖其他包\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("解决办法：卸载的时候忽略依赖")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# rpm -e --nodeps mysql-libs-5.1.71-1.el6.x86_64\n# --nodeps 忽略依赖\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"tip custom-block"},[e("p",{staticClass:"custom-block-title"},[s._v("MySQL配置文件的目录")]),s._v(" "),e("p",[s._v("某些情况下，在卸载重装的时候，之前的配置信息没有删除，可能会影响之后的使用。")]),s._v(" "),e("p",[s._v("可以删除掉这个目录 /var/lib/mysql/")]),s._v(" "),e("p",[e("code",[s._v("rm -rf /var/lib/mysql")])]),s._v(" "),e("ul",[e("li",[s._v("在启动mysql的时候，可能出现的问题")])]),s._v(" "),e("p",[s._v("[root@localhost zed]# service mysql start\nStarting MySQL.. ERROR! The server quit without updating PID file (/var/lib/mysql/localhost.localdomain.pid).")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("解决方案：查看MySQL后台执行的进行，手动结束掉")]),s._v(" "),e("p",[e("code",[s._v("ps -A | grep mysql")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# ps -A | grep mysql\n 92902 pts/0    00:00:01 mysqld\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("92902 就是mysqld后台进程的pid")]),s._v(" "),e("p",[e("code",[s._v("kil -9 92902")]),s._v(" 强制结束进程，然后重启MySQL")]),s._v(" "),e("p",[e("code",[s._v("service mysql start")])])])])]),s._v(" "),e("p",[s._v("重新安装")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# rpm -ivh MySQL-server-5.5.40-1.linux2.6.x86_64.rpm \nPreparing...                ########################################### [100%]\n   1:MySQL-server           ########################################### [100%]\n\nPLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !\nTo do so, start the server, then issue the following commands:\n\n/usr/bin/mysqladmin -u root password 'new-password'\n/usr/bin/mysqladmin -u root -h localhost.localdomain password 'new-password'\n\nAlternatively you can run:\n/usr/bin/mysql_secure_installation\n\nwhich will also give you the option of removing the test\ndatabases and anonymous user created by default.  This is\nstrongly recommended for production servers.\n\nSee the manual for more instructions.\n\nPlease report any problems at http://bugs.mysql.com/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h3",{attrs:{id:"_2、安装客户端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装客户端","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、安装客户端")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# rpm -ivh MySQL-client-5.5.40-1.linux2.6.x86_64.rpm \nPreparing...                ########################################### [100%]\n   1:MySQL-client           ########################################### [100%]\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"_2、设置密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、设置密码","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、设置密码")]),s._v(" "),e("ul",[e("li",[s._v("PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !")]),s._v(" "),e("li",[e("ul",[e("li",[s._v("请记得给MySQL的root用户设置密码")]),s._v(" "),e("li",[s._v("/usr/bin/mysqladmin -u root password '新密码'")])])])]),s._v(" "),e("h3",{attrs:{id:"_1、开启服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、开启服务","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、开启服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# service mysql start\nStarting MySQL.. SUCCESS! \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"_2、修改密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改密码","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、修改密码")]),s._v(" "),e("blockquote",[e("p",[s._v("mysqladmin -u root password '新密码'")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# mysqladmin -u root password 'root'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"_3、登录测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、登录测试","aria-hidden":"true"}},[s._v("#")]),s._v(" 3、登录测试")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# mysql -u root -p\nEnter password: # 输入密码，控制台不显示密码\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 5\nServer version: 5.5.40 MySQL Community Server (GPL)\n# 登录成功\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h1",{attrs:{id:"_2、配置mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、配置mysql","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、配置MySQL")]),s._v(" "),e("h2",{attrs:{id:"_1、修改字符编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、修改字符编码","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、修改字符编码")]),s._v(" "),e("h3",{attrs:{id:"_1、查看字符编码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、查看字符编码","aria-hidden":"true"}},[s._v("#")]),s._v(" 1、查看字符编码")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> show variables like '%char%';\n+--------------------------+----------------------------+\n| Variable_name            | Value                      |\n+--------------------------+----------------------------+\n| character_set_client     | utf8                       |\n| character_set_connection | utf8                       |\n| character_set_database   | latin1                     |\n| character_set_filesystem | binary                     |\n| character_set_results    | utf8                       |\n| character_set_server     | latin1                     |\n| character_set_system     | utf8                       |\n| character_sets_dir       | /usr/share/mysql/charsets/ |\n+--------------------------+----------------------------+\n8 rows in set (0.00 sec)\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("blockquote",[e("p",[s._v("character_set_database=latin1")]),s._v(" "),e("p",[s._v("character_set_server=latin1")])]),s._v(" "),e("h3",{attrs:{id:"_2、修改配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改配置文件","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、修改配置文件")]),s._v(" "),e("blockquote",[e("p",[s._v("mysql安装在/usr/share/mysql/")]),s._v(" "),e("p",[s._v("配置文件也在这个目录下")]),s._v(" "),e("p",[s._v("拷贝配置文件到/etc/下面")]),s._v(" "),e("p",[e("code",[s._v("[zed@localhost ~]$ cp /usr/share/mysql/my-small.cnf /etc/my.cnf")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# The MySQL server\n[mysqld]\ncharacter_set_server=utf8\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1g0qjosb9fhj20hd05w3z2.jpg",alt:""}})]),s._v(" "),e("p",[s._v("使用Vi编辑器打开my.cnf配置文件，修改上面的内容，然后。重启MySQL 服务")])]),s._v(" "),e("h2",{attrs:{id:"_2、导入数据库脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、导入数据库脚本","aria-hidden":"true"}},[s._v("#")]),s._v(" 2、导入数据库脚本")]),s._v(" "),e("p",[s._v("创建数据库")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n4 rows in set (0.02 sec)\n\nmysql> create database smbms;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| smbms              |\n| test               |\n+--------------------+\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("p",[s._v("导入数据库脚本文件")]),s._v(" "),e("div",{staticClass:"language-mysql line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[root@localhost zed]# mysql -u root -p smbms < smbms_db.sql \nEnter password: \n# smbms必须提前创建好\n\nmysql> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| smbms              |\n| test               |\n+--------------------+\n5 rows in set (0.00 sec)\n\nmysql> use smbms;\nDatabase changed\n\nmysql> show tables;\n+-----------------+\n| Tables_in_smbms |\n+-----------------+\n| smbms_address   |\n| smbms_bill      |\n| smbms_provider  |\n| smbms_role      |\n| smbms_user      |\n+-----------------+\n5 rows in set (0.00 sec)\n# 数据库已经导入\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br")])]),e("h2",{attrs:{id:"_3、远程连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、远程连接","aria-hidden":"true"}},[s._v("#")]),s._v(" 3、远程连接")]),s._v(" "),e("blockquote",[e("p",[s._v("1.开放3306端口")]),s._v(" "),e("p",[s._v("2.授权")]),s._v(" "),e("p",[s._v("grant all privileges on "),e("em",[s._v(".")]),s._v(" to root@'%' identified by 'root' with grant option;")]),s._v(" "),e("p",[s._v("3.刷新权限")]),s._v(" "),e("p",[s._v("flush privileges;")]),s._v(" "),e("p",[s._v("4.第三方工具连接测试")])]),s._v(" "),e("h2",{attrs:{id:"_4、项目的数据库连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、项目的数据库连接","aria-hidden":"true"}},[s._v("#")]),s._v(" 4、项目的数据库连接")]),s._v(" "),e("blockquote",[e("p",[s._v("注意修改项目中的数据库连接信息，IP地址端口数据库名称应该是远程MySQL。")])])])}],!1,null,null,null);t.options.__file="12-MySQL.md";a.default=t.exports}}]);