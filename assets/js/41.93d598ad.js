(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{173:function(t,e,s){"use strict";s.r(e);var n=s(0),a=Object(n.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("比如我们的单体应用All In One,如果一台服务器不能满足高并发的需求，可以横向扩展服务器数量。")]),t._v(" "),s("p",[t._v("但是服务器中的项目都是相同的。")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("比如某些服务器是用户模块，有些服务器部署商品或物流模块。")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),s("p",[t._v("安装三个Tomcat(测试负载均衡)\n修改主页的内容，当访问不同的Tomcat时能看到明显变化。")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("p",[t._v("修改Tomcat端口号，使三台Tomcat使用不同的端口。")]),t._v(" "),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),s("p",[t._v("开启防火墙的18080和28080、38080端口。(如果是远程访问需要开启)")]),t._v(" "),t._m(12),s("p",[t._v("修改完成后，需要重启防火请")]),t._v(" "),t._m(13),t._m(14),t._v(" "),s("p",[t._v("启动三台Tomcat，测试。")]),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),s("p",[t._v("项目中瓦片资源越来越多，如果提高瓦片的访问效率是一个需要解决的问题。这里，我们考虑使用Nginx来代理静态资源进行初步解决。")]),t._v(" "),s("p",[t._v('Nginx ("engine x") 是一个高性能的[HTTP]和[反向代理]服务器，也是一个IMAP/POP3/SMTP[服务器]。Nginx是由Igor Sysoev为[俄罗斯]访问量第二的Rambler.ru站点开发的。')]),t._v(" "),s("p",[t._v("何为反向代理呢？即以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个服务器。")]),t._v(" "),s("p",[t._v("而Nginx主要完成的工作就是反向代理，比如我们向一台服务器的80端口发送了请求，该请求首先由Nginx监听到，其接受到请求内容后再转发给其他服务器，其他服务器处理完后再将结果传送给Nginx，最后由Nginx来统一返回给初始请求端。")]),t._v(" "),s("p",[t._v("Nginx最常见的使用方法就是作为静态资源伺服器，比如将CSS，JS，html，htm等文件进行缓存处理。")]),t._v(" "),s("p",[t._v("在高连接并发的情况下，Nginx是Apache服务器不错的替代品。")]),t._v(" "),t._m(17),t._v(" "),s("p",[t._v("1、安装Nginx")]),t._v(" "),t._m(18),s("p",[t._v("2、查看nginx版本")]),t._v(" "),t._m(19),s("p",[t._v("3、启动nginx")]),t._v(" "),t._m(20),s("p",[t._v("4、开启防火墙80端口(如果是远程访问需要开启)\n访问Nginx测试，http://IP地址")]),t._v(" "),s("hr"),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("If you see this page, the nginx web server is successfully installed and working. Further configuration is required.")]),t._v(" "),s("p",[t._v("For online documentation and support please refer to "),s("a",{attrs:{href:"http://nginx.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx.org"),s("OutboundLink")],1),t._v(".\nCommercial support is available at "),s("a",{attrs:{href:"http://nginx.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nginx.com"),s("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(22),t._v(" "),s("hr"),t._v(" "),t._m(23),t._v(" "),s("p",[t._v("配置负载均衡\n修改/etc/nginx/conf.d/目录下的default.conf文件，添加如下内容")]),t._v(" "),t._m(24),s("p",[t._v("完成负载均衡测试。")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),s("p",[t._v("Nginx 其他命令\n以下包含了 Nginx 常用的几个命令：\nnginx –t \t\t# 检查nginx.conf配置文件是否正确\nnginx -s reload            # 重新载入配置文件\nnginx -s reopen            # 重启 Nginx\nnginx -s stop              # 停止 Nginx")])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1、tomcat集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、tomcat集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 1、Tomcat集群")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("集群：所谓集群，简单说就是相同的内容复制多份。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分布式：在微服务架构中，不同服务器中的内容不完全相同。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("总结：")]),this._v(" "),e("p",[this._v("Tomcat集群指的是相同的Tomcat复制多份。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1、复制tomcat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、复制tomcat","aria-hidden":"true"}},[this._v("#")]),this._v(" 1、复制Tomcat")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("vi tomcat*/webapps/ROOT/index.jsp")]),this._v(" "),e("p",[this._v("比如修改如下内容：")]),this._v(" "),e("p",[this._v("If you're seeing this, you've successfully installed Tomcat. Congratulations!")]),this._v(" "),e("p",[this._v("把上面内容改成不一样的。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2、修改端口"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改端口","aria-hidden":"true"}},[this._v("#")]),this._v(" 2、修改端口")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("18080、28080、38080")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(" vi ./tomcat71/conf/server.xml\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("分别在下面的三个端口前加 1,2,3")]),this._v(" "),e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1fzfgrhy4b7j20s501xjre.jpg",alt:""}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1fzfgs6zzs0j20h102mq2w.jpg",alt:""}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1fzfgsolqdvj20ok01rdft.jpg",alt:""}})]),this._v(" "),e("p",[this._v("使三台服务器端口不同。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("vi /etc/sysconfig/iptables\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("service iptables restart\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3、测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、测试","aria-hidden":"true"}},[this._v("#")]),this._v(" 3、测试")])},function(){var t=this.$createElement,e=this._self._c||t;return e("blockquote",[e("p",[this._v("./tomcat*/bin/startup.sh")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2、nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" 2、Nginx")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_1、安装配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 1、安装配置")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[root@localhost zed]# rpm -ivh nginx-1.14.0-1.el6.ngx.x86_64.rpm \nwarning: nginx-1.14.0-1.el6.ngx.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY\nPreparing...                ########################################### [100%]\n   1:nginx                  ########################################### [100%]\n----------------------------------------------------------------------\n\nThanks for using nginx!\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("[root@localhost zed]# nginx -v\nnginx version: nginx/1.14.0\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("[root@localhost zed]# service nginx start\nStarting nginx:                                            [  OK  ]\n")])]),this._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[this._v("1")]),e("br"),e("span",{staticClass:"line-number"},[this._v("2")]),e("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"welcome-to-nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#welcome-to-nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" Welcome to nginx!")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("em",[this._v("Thank you for using nginx.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_2、负载均衡"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2、负载均衡","aria-hidden":"true"}},[this._v("#")]),this._v(" 2、负载均衡")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("upstream accp.site{\n      server 192.168.200.150:18080 weight=1;\n      server 192.168.200.150:28080 weight=2;\n      server 192.168.200.150:38080 weight=1;\n}\n\n# 修改此内容，添加\n# proxy_pass http://accp.site/;\nlocation / {\n    root   /usr/share/nginx/html;\n    index  index.html index.htm;\n    proxy_pass http://accp.site/;\n}\n\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_3、反向代理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3、反向代理","aria-hidden":"true"}},[this._v("#")]),this._v(" 3、反向代理")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1fzfi0vjuvuj20vp0r9dkj.jpg",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_4、动静分离"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4、动静分离","aria-hidden":"true"}},[this._v("#")]),this._v(" 4、动静分离")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/6bf3bf5ely1fzfi0l3n2cj20js0lydk0.jpg",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"_5、其他命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5、其他命令","aria-hidden":"true"}},[this._v("#")]),this._v(" 5、其他命令")])}],!1,null,null,null);a.options.__file="11-Nginx.md";e.default=a.exports}}]);